package day9;

/* 8. Write a program, which will create a deadlock. */

class th1 extends Thread{
	String resrc1,resrc2;
	th1(String st1,String st2){
		resrc1 = st1;
		resrc2 = st2;
	}
	public void run() {
		synchronized (resrc1){
			System.out.println("Thread 1 -> Resource 1 Not Available!!!");
			try {
				Thread.sleep(100);
			} 
			catch (Exception e) {
				e.printStackTrace();
			}  
			synchronized (resrc2) {  
				System.out.println("Thread 1 -> Resource 2 Not Available!!!");  
			}
		}
	}
}

class th2 extends Thread{
	String resrc1,resrc2;
	th2(String st1,String st2){
		resrc1 = st1;
		resrc2 = st2;
	}
	public void run() {
		synchronized (resrc2){
			System.out.println("Thread 2 -> Resource 2 Not Available!!!");
			try {
				Thread.sleep(100);
			} 
			catch (Exception e) {
				e.printStackTrace();
			}  
			synchronized (resrc1) {  
				System.out.println("Thread 2 -> Resource 1 Not Available!!!");  
			}
		}
	}
}

public class q8 {

	public static void main(String[] args) {
		final String resrc1 = "ABC";
		final String resrc2 = "XYZ";
		// tobj1 tries to lock resrc1 then resrc2  
		th1 tobj1 = new th1(resrc1,resrc2);
		// tobj2 tries to lock resrc2 then resrc1  
		th2 tobj2 = new th2(resrc1,resrc2);
		tobj1.start();
		tobj2.start();  
	}

}
